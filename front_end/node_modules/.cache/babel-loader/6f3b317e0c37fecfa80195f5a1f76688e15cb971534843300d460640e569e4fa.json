{"ast":null,"code":"var _jsxFileName = \"/Users/frank/workspace/dev_practice/front_end/src/components/DisplayArea.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { CopyOutlined } from '@ant-design/icons';\nimport { Tooltip } from 'antd'; // 引入 Tooltip 组件\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DisplayArea({\n  displaytxts,\n  toScroll,\n  setToScroll,\n  componentWidth,\n  style\n}) {\n  _s();\n  const scrollableDivRef = useRef(null);\n  const [showPopup, setShowPopup] = useState(false);\n  const [hoveredIndex, setHoveredIndex] = useState(null); // 用于跟踪悬停的气泡索引\n\n  useEffect(() => {\n    scrollableDivRef.current.scrollTop = scrollableDivRef.current.scrollHeight;\n    setToScroll(false);\n  }, [displaytxts, toScroll, setToScroll]); // 添加 displaytxts 作为依赖\n\n  const copyToClipboard = text => {\n    navigator.clipboard.writeText(text).then(() => {\n      setShowPopup(true);\n      setTimeout(() => {\n        setShowPopup(false);\n      }, 2000); // 显示2秒后隐藏\n    }).catch(err => {\n      console.error('复制失败', err);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: scrollableDivRef,\n    style: style,\n    children: [showPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        bottom: '20px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n        backgroundColor: 'rgba(0, 0, 0, 0.7)',\n        color: 'white',\n        padding: '10px 20px',\n        borderRadius: '5px',\n        zIndex: 1000\n      },\n      children: \"\\u5185\\u5BB9\\u5DF2\\u590D\\u5236\\u5230\\u526A\\u8D34\\u677F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 17\n    }, this), displaytxts.map((x, i) => {\n      return /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          listStyleType: 'none',\n          padding: '0',\n          margin: '0'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            display: 'flex',\n            justifyContent: x.role === 'user' ? 'flex-end' : 'flex-start',\n            position: 'relative' // 添加相对定位\n          },\n          onMouseEnter: () => setHoveredIndex(i) // 鼠标进入时设置悬停索引\n          ,\n          onMouseLeave: () => setHoveredIndex(null) // 鼠标离开时重置悬停索引\n          ,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'relative',\n              padding: '10px',\n              display: 'inline-block',\n              backgroundColor: x.role === 'user' ? '#E8E8E8' : '#229FFF',\n              borderRadius: '10px',\n              maxWidth: componentWidth,\n              color: x.role === 'user' ? 'black' : 'white',\n              wordBreak: 'break-word',\n              marginTop: '20px',\n              marginBottom: '10px',\n              marginLeft: x.role === 'user' ? '0px' : '10px',\n              marginRight: x.role === 'assistant' ? '10px' : '0px',\n              overflow: 'hidden'\n            },\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              components: {\n                p: ({\n                  children\n                }) => /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    margin: 0,\n                    wordBreak: 'break-word',\n                    maxWidth: '100%'\n                  },\n                  children: children\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 86\n                }, this)\n              },\n              children: x.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 33\n          }, this), x.role === 'user' && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"user.ico\",\n            alt: \"avatar\",\n            style: {\n              width: '40px',\n              height: '40px',\n              borderRadius: '50%',\n              marginTop: '15px',\n              marginLeft: '10px',\n              marginRight: '10px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 38\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"\\u590D\\u5236\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => copyToClipboard(x.content),\n              style: {\n                backgroundColor: 'transparent',\n                border: 'none',\n                cursor: 'pointer',\n                color: 'gray',\n                position: 'absolute',\n                bottom: '5px',\n                // 调整按钮位置到气泡外的左下角\n                left: x.role === 'assistant' ? '10px' : '88.5%',\n                transform: 'translateY(100%)',\n                display: hoveredIndex === i ? 'block' : 'none' // 根据悬停索引控制显示\n              },\n              children: /*#__PURE__*/_jsxDEV(CopyOutlined, {\n                style: {\n                  fontSize: '16px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 29\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 25\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 9\n  }, this);\n}\n_s(DisplayArea, \"GQAh15Vy2zoPUUHwmaLlamaijws=\");\n_c = DisplayArea;\nvar _c;\n$RefreshReg$(_c, \"DisplayArea\");","map":{"version":3,"names":["useEffect","useRef","useState","ReactMarkdown","CopyOutlined","Tooltip","jsxDEV","_jsxDEV","DisplayArea","displaytxts","toScroll","setToScroll","componentWidth","style","_s","scrollableDivRef","showPopup","setShowPopup","hoveredIndex","setHoveredIndex","current","scrollTop","scrollHeight","copyToClipboard","text","navigator","clipboard","writeText","then","setTimeout","catch","err","console","error","ref","children","position","bottom","left","transform","backgroundColor","color","padding","borderRadius","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","map","x","i","listStyleType","margin","display","justifyContent","role","onMouseEnter","onMouseLeave","maxWidth","wordBreak","marginTop","marginBottom","marginLeft","marginRight","overflow","components","p","content","src","alt","width","height","title","onClick","border","cursor","fontSize","_c","$RefreshReg$"],"sources":["/Users/frank/workspace/dev_practice/front_end/src/components/DisplayArea.jsx"],"sourcesContent":["import {useEffect, useRef, useState} from 'react'\nimport ReactMarkdown from 'react-markdown'\nimport { CopyOutlined } from '@ant-design/icons'\nimport { Tooltip } from 'antd' // 引入 Tooltip 组件\n\nexport default function DisplayArea({ displaytxts, toScroll, setToScroll, componentWidth, style }) {\n    const scrollableDivRef = useRef(null)\n    const [showPopup, setShowPopup] = useState(false)\n    const [hoveredIndex, setHoveredIndex] = useState(null) // 用于跟踪悬停的气泡索引\n\n    useEffect(()=>{\n            scrollableDivRef.current.scrollTop = scrollableDivRef.current.scrollHeight\n            setToScroll(false)\n        }, [displaytxts, toScroll, setToScroll]); // 添加 displaytxts 作为依赖\n\n    const copyToClipboard = (text) => {\n        navigator.clipboard.writeText(text).then(() => {\n            setShowPopup(true)\n            setTimeout(() => {\n                setShowPopup(false)\n            }, 2000) // 显示2秒后隐藏\n        }).catch(err => {\n            console.error('复制失败', err);\n        });\n    }\n\n    return (\n        <div \n            ref={scrollableDivRef}\n            style={style}\n        >\n            {showPopup && (\n                <div style={{\n                    position: 'fixed',\n                    bottom: '20px',\n                    left: '50%',\n                    transform: 'translateX(-50%)',\n                    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n                    color: 'white',\n                    padding: '10px 20px',\n                    borderRadius: '5px',\n                    zIndex: 1000\n                }}>\n                    内容已复制到剪贴板\n                </div>\n            )}\n            {\n                displaytxts.map((x, i) => {\n                    return (\n                        <ul style={{ listStyleType: 'none', padding: '0', margin: '0' }} key={i}>\n                            <li\n                                style={{\n                                    display: 'flex',\n                                    justifyContent: x.role === 'user' ? 'flex-end' : 'flex-start',\n                                    position: 'relative' // 添加相对定位\n                                }}\n                                onMouseEnter={() => setHoveredIndex(i)} // 鼠标进入时设置悬停索引\n                                onMouseLeave={() => setHoveredIndex(null)} // 鼠标离开时重置悬停索引\n                            >\n                                <div\n                                    style={{\n                                        position: 'relative',\n                                        padding: '10px',\n                                        display: 'inline-block',\n                                        backgroundColor: x.role === 'user' ? '#E8E8E8' : '#229FFF',\n                                        borderRadius: '10px',\n                                        maxWidth: componentWidth,\n                                        color: x.role === 'user' ? 'black' : 'white',\n                                        wordBreak: 'break-word',\n                                        marginTop: '20px',\n                                        marginBottom: '10px',\n                                        marginLeft: x.role === 'user' ? '0px' : '10px',\n                                        marginRight: x.role === 'assistant' ? '10px' : '0px',\n                                        overflow: 'hidden',\n                                    }}\n                                >\n                                    <ReactMarkdown components={{p: ({ children }) => <span style={{ margin: 0, wordBreak: 'break-word', maxWidth: '100%' }}>{children}</span>}}>\n                                        {x.content}\n                                    </ReactMarkdown>\n                                </div>\n                                {\n                                    x.role === 'user' && \n                                    (<img \n                                        src='user.ico' \n                                        alt=\"avatar\" \n                                        style={{ \n                                            width: '40px', \n                                            height: '40px', \n                                            borderRadius: '50%', \n                                            marginTop: '15px',\n                                            marginLeft: '10px', \n                                            marginRight: '10px' \n                                        }} \n                                    />)\n                                }\n                                {\n                                    (<Tooltip title=\"复制\">\n                                        <button \n                                            onClick={() => copyToClipboard(x.content)} \n                                            style={{\n                                                backgroundColor: 'transparent',\n                                                border: 'none',\n                                                cursor: 'pointer',\n                                                color: 'gray',\n                                                position: 'absolute',\n                                                bottom: '5px', // 调整按钮位置到气泡外的左下角\n                                                left: x.role === 'assistant' ? '10px' : '88.5%',\n                                                transform: 'translateY(100%)',\n                                                display: hoveredIndex === i ? 'block' : 'none' // 根据悬停索引控制显示\n                                            }}\n                                        >\n                                            <CopyOutlined style={{ fontSize: '16px' }} />\n                                        </button>\n                                    </Tooltip>)\n                                }\n                            </li>\n                        </ul>\n                    )\n                })\n            }\n        </div>\n    )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}